{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///external commonjs \"@nestjs/common\"","webpack:///external commonjs \"@nestjs/core\"","webpack:///./src/app/app.module.ts","webpack:///external commonjs \"tslib\"","webpack:///./src/app/app.controller.ts","webpack:///./src/app/app.service.ts","webpack:///./src/app/user/user.module.ts","webpack:///external commonjs \"@nestjs/mongoose\"","webpack:///./src/app/user/models/user.model.ts","webpack:///external commonjs \"mongoose\"","webpack:///./src/app/user/repositories/user.repository.ts","webpack:///./src/app/user/user.commands.ts","webpack:///../../libs/contracts/src/index.ts","webpack:///../../libs/contracts/src/lib/account/account.login.ts","webpack:///external commonjs \"class-validator\"","webpack:///../../libs/contracts/src/lib/account/account.register.ts","webpack:///../../libs/contracts/src/lib/account/account.user-info.ts","webpack:///../../libs/contracts/src/lib/account/account.change-profile.ts","webpack:///../../libs/contracts/src/lib/wallet/wallet.create-account.ts","webpack:///../../libs/interfaces/src/index.ts","webpack:///../../libs/interfaces/src/lib/user.interface.ts","webpack:///../../libs/interfaces/src/lib/auth.interface.ts","webpack:///../../libs/interfaces/src/lib/events.interface.ts","webpack:///../../libs/interfaces/src/lib/account.interface.ts","webpack:///external commonjs \"class-transformer\"","webpack:///../../libs/contracts/src/lib/wallet/wallet.update-account.ts","webpack:///../../libs/contracts/src/lib/wallet/wallet.get-account.ts","webpack:///../../libs/contracts/src/lib/wallet/wallet.list-accounts.ts","webpack:///../../libs/contracts/src/lib/wallet/wallet.delete-account.ts","webpack:///external commonjs \"nestjs-rmq\"","webpack:///./src/app/user/user.service.ts","webpack:///./src/app/user/entities/user.entity.ts","webpack:///external commonjs \"bcryptjs\"","webpack:///./src/app/user/user.event-immiter.ts","webpack:///./src/app/user/user.queries.ts","webpack:///./src/app/auth/auth.module.ts","webpack:///./src/app/auth/auth.controller.ts","webpack:///./src/app/auth/auth.service.ts","webpack:///external commonjs \"@nestjs/jwt\"","webpack:///./src/app/configs/jwt.config.ts","webpack:///external commonjs \"@nestjs/config\"","webpack:///./src/app/configs/mongo.config.ts","webpack:///./src/app/configs/rmq.config.ts","webpack:///webpack/bootstrap","webpack:///./src/main.ts"],"sourcesContent":["module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/core\");","import { Module } from '@nestjs/common';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\nimport { UserModule } from './user/user.module';\nimport { AuthModule } from './auth/auth.module';\nimport { ConfigModule } from '@nestjs/config';\nimport { MongooseModule } from '@nestjs/mongoose';\nimport { getMongoConfig } from './configs/mongo.config';\nimport { RMQModule } from 'nestjs-rmq';\nimport { getRMQConfig } from './configs/rmq.config';\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({isGlobal: true, envFilePath: 'envs/.account.env'}), \n    RMQModule.forRootAsync(getRMQConfig()),\n    UserModule, \n    AuthModule,\n    MongooseModule.forRootAsync(getMongoConfig())\n  ],\n  controllers: [AppController],\n  providers: [AppService],\n})\nexport class AppModule {}\n","module.exports = require(\"tslib\");","import { Controller, Get } from '@nestjs/common';\nimport { AppService } from './app.service';\n\n@Controller()\nexport class AppController {\n  constructor(private readonly appService: AppService) {}\n\n  @Get()\n  getData() {\n    return this.appService.getData();\n  }\n}\n","import { Injectable } from '@nestjs/common';\n\n@Injectable()\nexport class AppService {\n  getData(): { message: string } {\n    return { message: 'Hello API' };\n  }\n}\n","import { Module } from '@nestjs/common';\nimport { MongooseModule } from '@nestjs/mongoose';\nimport { User, UserSchema } from './models/user.model';\nimport { UserRepository } from './repositories/user.repository';\nimport { UserCommands } from './user.commands';\nimport { UserQueries } from './user.queries';\nimport { UserService } from './user.service';\nimport { UserEventEmmiter } from './user.event-immiter';\n\n@Module({\n    imports: [MongooseModule.forFeature([\n        {name: User.name, schema: UserSchema}\n    ])],\n    providers: [\n        UserRepository,\n        UserService,\n        UserEventEmmiter\n    ],\n    exports: [\n        UserRepository,\n        UserService\n    ],\n    controllers: [UserCommands, UserQueries]\n})\nexport class UserModule {}\n","module.exports = require(\"@nestjs/mongoose\");","import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport { Document, Types } from 'mongoose';\nimport { IUser } from '@moneytracker/interfaces';\n\n@Schema()\nexport class User extends Document implements IUser {\n  override _id: string; // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ _id –∫–∞–∫ string\n\n  @Prop()\n  displayName?: string;\n\n  @Prop({ required: true })\n  email: string;\n\n  @Prop({ required: true })\n  passwordHash: string;\n}\n\nexport const UserSchema = SchemaFactory.createForClass(User);","module.exports = require(\"mongoose\");","import { Model } from \"mongoose\";\nimport { User } from \"../models/user.model\";\nimport { InjectModel } from \"@nestjs/mongoose\";\nimport { Injectable } from \"@nestjs/common\";\nimport { UserEntity } from \"../entities/user.entity\";\n\n@Injectable()\nexport class UserRepository {\n    constructor(\n        @InjectModel(User.name) private readonly userModel: Model<User>\n    ) {}\n\n    async createUser(user: UserEntity) {\n        const newUser = new this.userModel(user);\n        return newUser.save();\n    }\n\n    async updateUser(user: UserEntity) {\n        const {_id, ...rest} = user;\n        return this.userModel.updateOne({_id}, {$set: {...rest}}).exec();\n    }\n\n    async findUser(email: string) {\n        return this.userModel.findOne({email}).exec();\n    }\n\n    async findUserById(id: string) {\n        return this.userModel.findById(id).exec();\n    }\n\n    async deleteUser(email: string) {\n        this.userModel.deleteOne({email}).exec();\n    }\n}","import { Body, Controller } from \"@nestjs/common\";\nimport { UserRepository } from \"./repositories/user.repository\";\nimport { AccountChangeProfile } from \"@moneytracker/contracts\";\nimport { RMQRoute, RMQValidate } from \"nestjs-rmq\";\nimport { UserEntity } from \"./entities/user.entity\";\nimport { UserService } from \"./user.service\";\n\n\n@Controller()\nexport class UserCommands {\n    constructor(private readonly userService: UserService) {}\n\n    @RMQValidate()\n    @RMQRoute(AccountChangeProfile.topic)\n    async changeProfile(@Body() {user, id}: AccountChangeProfile.Request): Promise<AccountChangeProfile.Response> {\n        return this.userService.changeProfile(user, id);\n    }\n}","export * from './lib/account/account.login';\nexport * from './lib/account/account.register';\nexport * from './lib/account/account.user-info';\nexport * from './lib/account/account.change-profile';\nexport * from './lib/wallet/wallet.create-account';\nexport * from './lib/wallet/wallet.update-account';\nexport * from './lib/wallet/wallet.get-account';\nexport * from './lib/wallet/wallet.list-accounts';\nexport * from './lib/wallet/wallet.delete-account';\n\n","import { IsEmail, IsString } from 'class-validator';\n\nexport namespace AccountLogin {\n    export const topic = 'account.login.command';\n\n    export class Request {\n        @IsEmail()\n        email: string;\n\n        @IsString()\n        password: string;\n    }\n\n    export class Response {\n        access_token: string;\n    }\n}\n","module.exports = require(\"class-validator\");","import { IsEmail, IsOptional, IsString } from \"class-validator\";\n\nexport namespace AccountRegister {\n    export const topic = 'account.register.command';\n\n    export class Request {\n        @IsEmail()\n        email: string;\n\n        @IsString()\n        password: string;\n\n        @IsOptional()\n        @IsString()\n        displayName?: string;\n    }\n\n    export class Response {\n        email: string;\n    }\n}\n","import { IsString } from 'class-validator';\nimport {IUser} from '@moneytracker/interfaces'\n\nexport namespace AccountUserInfo {\n    export const topic = 'account.user-info.query';\n\n    export class Request {\n        @IsString()\n        id: string;\n    }\n\n    export class Response {\n        profile: Omit<IUser, 'passwordHash'>;\n    }\n}\n","import { IsObject, IsString } from 'class-validator';\nimport {IUser} from '@moneytracker/interfaces'\n\nexport namespace AccountChangeProfile {\n    export const topic = 'account.change-profile.command';\n\n    export class Request {\n        @IsString()\n        id: string;\n\n        @IsObject()\n        user: Pick<IUser, 'displayName'>;\n    }\n\n    export class Response {}\n}\n","import { IsString, IsIn, IsOptional, IsNumber, ValidateNested, IsArray } from 'class-validator';\nimport { BillingCycleType, ICreditCardDetails } from '@moneytracker/interfaces';\nimport { Type } from 'class-transformer';\n\nexport namespace AccountCreate {\n  export const topic = 'account.create.command';\n\n  class CreditDto implements ICreditCardDetails {\n    @IsNumber() creditLimit: number;\n    @IsNumber() gracePeriodDays: number;\n    @IsIn(['fixed','calendar','perPurchase'] as BillingCycleType[]) billingCycleType: BillingCycleType;\n    @IsOptional() @IsNumber() billingCycleLengthDays?: number;\n    @IsOptional() @IsNumber() billingCycleStartDayOfMonth?: number;\n    @IsNumber() paymentPeriodDays: number;\n    @IsNumber() interestRate: number;\n    @IsOptional() @IsNumber() annualFee?: number;\n    @IsOptional() @IsNumber() cashWithdrawalFeePercent?: number;\n    @IsOptional() @IsNumber() cashWithdrawalFeeFixed?: number;\n    @IsOptional() @IsNumber() cashWithdrawalLimitPerMonth?: number;\n    @IsOptional() @IsNumber() cashbackPercentMax?: number;\n    @IsOptional() @IsArray() @IsString({ each: true }) cashbackCategories?: string[];\n  }\n\n  export class Request {\n    @IsString() userId: string;\n    @IsString() name: string;\n    @IsIn(['savings', 'debit', 'creditCard']) type: string;\n    @IsOptional() @IsString() currency?: string;\n\n    // –ï—Å–ª–∏ credit\n    @IsOptional()\n    @ValidateNested()\n    @Type(() => CreditDto)\n    creditDetails?: CreditDto;\n  }\n\n  export class Response {\n    accountId: string;\n  }\n}\n","export * from './lib/user.interface';\nexport * from './lib/auth.interface';\nexport * from './lib/events.interface';\nexport * from './lib/account.interface';\n","export interface IUser {\n    _id?: string;\n    displayName?: string;\n    email: string;\n    passwordHash: string;\n}\n","export interface IJWTPayload {\n    id: string;\n}","export interface IDomainEvent {\n    topic: string;\n    data: unknown;\n}","export enum AccountType {\n  Savings = 'savings',\n  Debit = 'debit',\n  CreditCard = 'creditCard',\n}\n\n// –¢–∏–ø—ã —Ä–∞—Å—á—ë—Ç–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞\nexport type BillingCycleType =\n  | 'fixed'       // —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ü–∏–∫–ª N –¥–Ω–µ–π –æ—Ç –¥–∞—Ç—ã –≤—ã–ø–∏—Å–∫–∏\n  | 'calendar'    // –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –º–µ—Å—è—Ü\n  | 'perPurchase' // –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –æ—Ç –¥–∞—Ç—ã –ø–æ–∫—É–ø–∫–∏\n\n// –î–µ—Ç–∞–ª–∏ –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã / –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ —Å—á—ë—Ç–∞\nexport interface ICreditCardDetails {\n  // –ª–∏–º–∏—Ç\n  creditLimit: number;\n\n  // –ª—å–≥–æ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–±–µ—Å–ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–π)\n  gracePeriodDays: number;\n\n  // —Ä–∞—Å—á—ë—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥\n  billingCycleType: BillingCycleType;\n  // –µ—Å–ª–∏ fixed:\n  billingCycleLengthDays?: number;\n  // –µ—Å–ª–∏ calendar:\n  billingCycleStartDayOfMonth?: number;\n  // –µ—Å–ª–∏ perPurchase ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π\n\n  // –ø–ª–∞—Ç—ë–∂–Ω—ã–π –ø–µ—Ä–∏–æ–¥\n  paymentPeriodDays: number;\n\n  // –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞ (–≥–æ–¥–æ–≤—ã—Ö)\n  interestRate: number;\n\n  // –≥–æ–¥–æ–≤–∞—è –∫–æ–º–∏—Å—Å–∏—è\n  annualFee?: number;\n\n  // –∫–æ–º–∏—Å—Å–∏—è –∑–∞ —Å–Ω—è—Ç–∏–µ –Ω–∞–ª–∏—á–Ω—ã—Ö\n  cashWithdrawalFeePercent?: number;\n  cashWithdrawalFeeFixed?: number;\n  cashWithdrawalLimitPerMonth?: number;\n\n  // –∫—ç—à–±—ç–∫ (max% –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)\n  cashbackPercentMax?: number;\n  cashbackCategories?: string[];\n}\n\n// –û–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–∏ ¬´–°—á—ë—Ç¬ª\nexport interface IAccount {\n  _id?: string;\n  userId: string;         // —á–µ–π —ç—Ç–æ —Å—á—ë—Ç\n  name: string;           // –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ\n  type: AccountType;\n  balance: number;\n  currency: string;\n  creditDetails?: ICreditCardDetails;  // —Ç–æ–ª—å–∫–æ –¥–ª—è type = 'credit'\n  deletedAt?: Date;        // soft-delete\n}\n","module.exports = require(\"class-transformer\");","import {\n  IsString,\n  IsOptional,\n  IsIn,\n  ValidateNested,\n  IsNumber,\n  IsArray,\n} from 'class-validator';\nimport { Type } from 'class-transformer';\nimport { BillingCycleType, ICreditCardDetails } from '@moneytracker/interfaces';\n\nexport namespace AccountUpdate {\n  export const topic = 'wallet.update-account.command';\n\n  class CreditDto implements Partial<ICreditCardDetails> {\n    @IsOptional() @IsNumber() creditLimit?: number;\n    @IsOptional() @IsNumber() gracePeriodDays?: number;\n    @IsOptional()\n    @IsIn(Object.values(['fixed','calendar','perPurchase']) as BillingCycleType[])\n    billingCycleType?: BillingCycleType;\n    @IsOptional() @IsNumber() billingCycleLengthDays?: number;\n    @IsOptional() @IsNumber() billingCycleStartDayOfMonth?: number;\n    @IsOptional() @IsNumber() paymentPeriodDays?: number;\n    @IsOptional() @IsNumber() interestRate?: number;\n    @IsOptional() @IsNumber() annualFee?: number;\n    @IsOptional() @IsNumber() cashWithdrawalFeePercent?: number;\n    @IsOptional() @IsNumber() cashWithdrawalFeeFixed?: number;\n    @IsOptional() @IsNumber() cashWithdrawalLimitPerMonth?: number;\n    @IsOptional() @IsNumber() cashbackPercentMax?: number;\n    @IsOptional() @IsArray() @IsString({ each: true }) cashbackCategories?: string[];\n  }\n\n  export class Request {\n    @IsString()\n    userId: string;\n\n    @IsString()\n    id: string;\n\n    @IsOptional()\n    @IsString()\n    name?: string;\n\n    @IsOptional()\n    @IsString()\n    currency?: string;\n\n    @IsOptional()\n    @ValidateNested()\n    @Type(() => CreditDto)\n    creditDetails?: CreditDto;\n  }\n\n  export class Response {}\n}\n","import { IsString } from 'class-validator';\n\nexport namespace AccountGet {\n  export const topic = 'account.get.query';\n\n  export class Request {\n    @IsString() userId: string;\n    @IsString() id: string;\n  }\n\n  export class Response {\n    account: any;  // –∑–¥–µ—Å—å IAccount\n  }\n}\n","import { IsString, IsOptional, IsArray } from 'class-validator';\n\nexport namespace AccountList {\n  export const topic = 'account.list.query';\n\n  export class Request {\n    @IsString() userId: string;\n    @IsOptional() @IsArray() peers?: string[];  // –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞\n  }\n\n  export class Response {\n    accounts: any[];  // –≤ —Ç–µ–ª–µ –±—É–¥—É—Ç –æ–±—ä–µ–∫—Ç—ã IAccount, –Ω–æ RMQ-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –æ–±—ã—á–Ω–æ –Ω–µ —Ç–∏–ø–∏–∑–∏—Ä—É—é—Ç –≥–ª—É–±–æ–∫–æ\n  }\n}\n","import { IsString } from 'class-validator';\n\nexport namespace AccountDelete {\n  export const topic = 'account.delete.command';\n\n  export class Request {\n    @IsString() userId: string;\n    @IsString() id: string;\n  }\n\n  export class Response {}\n}\n","module.exports = require(\"nestjs-rmq\");","import { AccountChangeProfile } from '@moneytracker/contracts';\nimport { IUser } from '@moneytracker/interfaces';\nimport { Injectable } from '@nestjs/common';\nimport { UserEntity } from './entities/user.entity';\nimport { UserRepository } from './repositories/user.repository';\nimport { UserEventEmmiter } from './user.event-immiter';\n\n@Injectable()\nexport class UserService {\n    constructor(private readonly userRepository: UserRepository,\n        private readonly userEventEmmiter: UserEventEmmiter\n    ) {}\n\n    async changeProfile(user: Pick<IUser, 'displayName'>, id: string): Promise<AccountChangeProfile.Response> {\n        const existedUser = await this.userRepository.findUserById(id);\n        if (!existedUser) {\n            throw new Error('–¢–∞–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');\n        }\n        const userEntity = new UserEntity(existedUser).updateProfile(user.displayName);\n        await this.updateUser(userEntity);\n        return {};\n    }\n\n    private updateUser(user: UserEntity) {\n        return Promise.all([\n            this.userEventEmmiter.handle(user),\n            this.userRepository.updateUser(user)\n        ])\n    }\n}\n","import { IDomainEvent, IUser } from \"@moneytracker/interfaces\";\nimport { compare, genSalt, hash } from \"bcryptjs\";\n\nexport class UserEntity implements IUser {\n    _id?: string;\n    displayName?: string;\n    email: string;\n    passwordHash: string;\n    events: IDomainEvent[] = [];\n\n    constructor(user: IUser) {\n      this._id = user._id;\n      this.displayName = user.displayName;\n      this.passwordHash = user.passwordHash;\n      this.email = user.email;\n    }\n\n    public getPublicProfile() {\n        return {\n            email: this.email,\n            displayName: this.displayName\n        }\n    }\n\n    public async setPassword(password: string) {\n        const salt = await genSalt(10);\n        this.passwordHash = await hash(password, salt);\n        return this;\n    }\n\n    public validatePassword(password: string) {\n        return compare(password, this.passwordHash);\n    }\n\n    public updateProfile(displayName: string) {\n        this.displayName = displayName;\n        return this;\n    }\n}","module.exports = require(\"bcryptjs\");","import { Injectable } from \"@nestjs/common\";\nimport { RMQService } from \"nestjs-rmq\";\nimport { UserEntity } from \"./entities/user.entity\";\n\n@Injectable()\nexport class UserEventEmmiter {\n    constructor(private readonly rmqService: RMQService) {}\n\n    async handle(user: UserEntity) {\n        for (const event of user.events) {\n            await this.rmqService.notify(event.topic, event.data);\n        }\n    }\n}","import { Body, Controller } from \"@nestjs/common\";\nimport { AccountUserInfo } from \"@moneytracker/contracts\";\nimport { RMQRoute, RMQValidate } from \"nestjs-rmq\";\nimport { UserRepository } from \"./repositories/user.repository\";\nimport { UserEntity } from \"./entities/user.entity\";\n\n@Controller()\nexport class UserQueries {\n    constructor(private readonly userRepository: UserRepository) {}\n\n    @RMQValidate()\n    @RMQRoute(AccountUserInfo.topic)\n    async userInfo(@Body() {id}: AccountUserInfo.Request): Promise<AccountUserInfo.Response> {\n        const user = await this.userRepository.findUserById(id);\n        const profile = new UserEntity(user).getPublicProfile();\n        return { profile };\n    }\n}","import { Module } from '@nestjs/common';\nimport { AuthController } from './auth.controller';\nimport { AuthService } from './auth.service';\nimport { UserModule } from '../user/user.module';\nimport { JwtModule } from '@nestjs/jwt';\nimport { getJWTConfig } from '../configs/jwt.config';\n\n@Module({\n  imports: [UserModule, JwtModule.registerAsync(getJWTConfig())],\n  controllers: [AuthController],\n  providers: [AuthService],\n})\nexport class AuthModule {}\n","import { Body, Controller } from '@nestjs/common';\nimport { AuthService } from './auth.service';\nimport { RMQRoute, RMQValidate } from 'nestjs-rmq';\nimport {AccountLogin, AccountRegister} from '@moneytracker/contracts';\n\n@Controller('auth')\nexport class AuthController {\n    constructor(\n        private readonly authService: AuthService\n    ) {}\n\n    @RMQValidate()\n    @RMQRoute(AccountRegister.topic)\n    async register(@Body() dto: AccountRegister.Request): Promise<AccountRegister.Response> {\n        return this.authService.register(dto);\n    }\n\n    @RMQValidate()\n    @RMQRoute(AccountLogin.topic)\n    async login(@Body() {email, password}: AccountLogin.Request): Promise<AccountLogin.Response> {\n        const { id } = await this.authService.validateUser(email, password);\n        return this.authService.login(id);\n    }\n}\n","import { Injectable } from '@nestjs/common';\nimport { UserRepository } from '../user/repositories/user.repository';\nimport { UserEntity } from '../user/entities/user.entity';\nimport { JwtService } from '@nestjs/jwt';\nimport { AccountRegister } from '@moneytracker/contracts';\n\n@Injectable()\nexport class AuthService {\n    constructor(\n        private readonly userRepository: UserRepository,\n        private readonly jwtService: JwtService\n    ) {}\n\n    async register({email, password, displayName}: AccountRegister.Request) {\n        const oldUser = await this.userRepository.findUser(email);\n        if (oldUser) {\n            throw new Error('–¢–∞–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');\n        }\n        const newUserEntity = await new UserEntity({\n            displayName,\n            email,\n            passwordHash: '',\n        }).setPassword(password);\n        const newUser = await this.userRepository.createUser(newUserEntity);\n        return {email: newUser.email}\n    }\n\n    async validateUser(email: string, password: string) {\n        const user = await this.userRepository.findUser(email);\n        if (!user) {\n            throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å');\n        }\n        const userEntity = new UserEntity(user);\n        const isCorrectPassword = await userEntity.validatePassword(password);\n        if (!isCorrectPassword) {\n            throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å');\n        }\n        return {id: user._id};\n    }\n\n    async login(id: string) {\n        return {\n            access_token: await this.jwtService.signAsync({id})\n        }\n    }\n}\n","module.exports = require(\"@nestjs/jwt\");","import { ConfigModule, ConfigService } from \"@nestjs/config\";\nimport { JwtModuleAsyncOptions } from \"@nestjs/jwt\";\n\nexport const getJWTConfig = (): JwtModuleAsyncOptions => ({\n    imports: [ConfigModule],\n    inject: [ConfigService],\n    useFactory: (ConfigService: ConfigService) => ({\n        secret: ConfigService.get('JWT_SECRET')\n    })\n})","module.exports = require(\"@nestjs/config\");","import { ConfigModule, ConfigService } from \"@nestjs/config\";\nimport { MongooseModuleAsyncOptions } from \"@nestjs/mongoose\";\n\nexport const getMongoConfig = (): MongooseModuleAsyncOptions => {\n    return {\n        useFactory: (configService: ConfigService) => ({\n            uri: getMongoString(configService)\n        }),\n        inject: [ConfigService],\n        imports: [ConfigModule]\n    }\n}\n\nconst getMongoString = (configService: ConfigService) => \n    \"mongodb://\" +\n    configService.get(\"MONGO_LOGIN\") +\n    \":\" +\n    configService.get(\"MONGO_PASSWORD\") +\n    \"@\" +\n    configService.get(\"MONGO_HOST\") +\n    \":\" +\n    configService.get(\"MONGO_PORT\") +\n    \"/\" +\n    configService.get(\"MONGO_DATABASE\") +\n    \"?authSource=\" +\n    configService.get(\"MONGO_AUTHDATABASE\");\n","import { ConfigModule, ConfigService } from \"@nestjs/config\";\nimport { IRMQServiceAsyncOptions } from \"nestjs-rmq\";\n\nexport const getRMQConfig = (): IRMQServiceAsyncOptions => ({\n    inject: [ConfigService],\n    imports: [ConfigModule],\n    useFactory: (configService: ConfigService) => ({\n        exchangeName: configService.get('AMQP_EXCHANGE') ?? '',\n        connections: [\n            {\n                login: configService.get('AMQP_USER') ?? '',\n                password: configService.get('AMQP_PASSWORD') ?? '',\n                host: configService.get('AMQP_HOSTNAME') ?? ''\n            }\n        ],\n        queueName: configService.get('AMQP_QUEUE'),\n        prefetchCount: 32,\n        serviceName: 'moneytracker-account'\n    })\n})","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * This is not a production server yet!\n * This is only a minimal backend to get started.\n */\n\nimport { Logger } from '@nestjs/common';\nimport { NestFactory } from '@nestjs/core';\nimport { AppModule } from './app/app.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n  await app.init();\n  Logger.log(\n    `üöÄ Application is running`\n  );\n}\n\nbootstrap();\n"],"names":[],"sourceRoot":""}